generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model appliance {
  id            Int    @id @default(autoincrement())
  brandId       Int
  brandName     String @db.VarChar(50)
  applianceName String @db.VarChar(250)
  shortName     String @db.VarChar(50)
}

model brands {
  id          Int      @id @default(autoincrement())
  brandName   String   @db.VarChar(100)
  shortName   String   @db.VarChar(30)
  country     String   @db.VarChar(30)
  isActive    Boolean? @default(false)
  orderNumber Int?     @db.SmallInt
}

model errorcode {
  errorId      Int                 @id @default(autoincrement())
  brandId      Int
  applianceId  Int
  modalId      Int
  featureId    Int
  erCode       String              @unique(map: "unique_erCode") @db.VarChar(50)
  title        String              @db.VarChar(200)
  description  String              @db.Text
  inverterType String              @db.VarChar(20)
  slug         String              @unique(map: "unique_slug") @db.VarChar(100)
  errorType    errorcode_errorType @default(code)
  otherTerm    String              @db.Text
  errorResolutions errorresolution[] // errorCode has many details related resolution
  @@fulltext([erCode, title, description, otherTerm], map: "erCode")
}

model errormodalmap {
  id          Int @id @default(autoincrement())
  errorcodeId Int
  modalId     Int
}

model errorresolution {
  resolutionId Int                      @id @default(autoincrement())
  errorId      Int
  brandId      Int
  description  String                   @db.Text
  title        String                   @db.Text
  contentOrder Int                      @default(1) @db.TinyInt
  other        String                   @db.Text
  section      errorresolution_section? @default(seo_title)
  errorCode     errorcode @relation(fields: [errorId], references: [errorId])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model modals {
  modalId    Int    @id @default(autoincrement())
  brandId    Int
  modalName  String @db.VarChar(100)
  type       String @db.VarChar(6)
  years      String @db.VarChar(30)
  capacity   Float  @db.Float
  star       Int    @db.TinyInt
  keyFeature String @db.Text

  @@fulltext([modalName, type, keyFeature, years], map: "modalName")
}

model queryform {
  id            Int      @id @default(autoincrement())
  name          String   @db.VarChar(100)
  email         String   @db.VarChar(100)
  queryText     String   @db.Text
  contactNumber String   @db.VarChar(15)
  createdAt     DateTime @default(now()) @db.DateTime(0)
  errorId       Int
}

model visitorlogs {
  id            Int      @id @default(autoincrement())
  ipAddress     String   @db.VarChar(100)
  referer       String   @db.Text
  userAgent     String   @db.Text
  createdAt     DateTime @default(now()) @db.DateTime(0)
}

enum errorresolution_section {
  seo_title
  faq
  helpful_tip
  fix
  causes
  what_does
}

enum errorcode_errorType {
  code
  symptom
}
